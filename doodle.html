<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>15-Second Digital Doodle</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    font-family: system-ui, sans-serif;
    background: #f2f2f2;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header {
    background: #111;
    color: #fff;
    width: 100%;
    text-align: center;
    padding: 12px;
    font-size: 18px;
    font-weight: bold;
  }

  .top-bar {
    display: flex;
    justify-content: space-between;
    width: 320px;
    margin: 8px 0;
    font-size: 14px;
  }

  #timer {
    font-weight: bold;
    color: #d32f2f;
  }

  canvas {
    background: #fff;
    border: 3px solid #222;
    border-radius: 14px;
    touch-action: none;
  }

  .controls {
    margin-top: 10px;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    justify-content: center;
    width: 320px;
  }

  .color {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid #333;
  }

  button {
    padding: 8px 12px;
    border: none;
    border-radius: 8px;
    background: #222;
    color: white;
    font-size: 13px;
  }

  footer {
    margin: 10px;
    font-size: 12px;
    color: #666;
    text-align: center;
  }
</style>
</head>

<body>

<header>15-Second Digital Doodle ðŸŽ¨</header>

<div class="top-bar">
  <div id="prompt">Finish the doodle!</div>
  <div id="timer">15s</div>
</div>

<canvas id="canvas" width="320" height="420"></canvas>

<div class="controls">
  <!-- Colors -->
  <div class="color" style="background:#000" onclick="setColor('#000')"></div>
  <div class="color" style="background:#e53935" onclick="setColor('#e53935')"></div>
  <div class="color" style="background:#1e88e5" onclick="setColor('#1e88e5')"></div>
  <div class="color" style="background:#43a047" onclick="setColor('#43a047')"></div>
  <div class="color" style="background:#fbc02d" onclick="setColor('#fbc02d')"></div>
  <div class="color" style="background:#8e24aa" onclick="setColor('#8e24aa')"></div>

  <!-- Brushes -->
  <button onclick="setBrush(4, 'round')">Normal</button>
  <button onclick="setBrush(8, 'round')">Thick</button>
  <button onclick="setBrush(4, 'square')">Dotted</button>

  <button onclick="nextKid()">Next Kid</button>
</div>

<footer>No scores â€¢ No pressure â€¢ Just create</footer>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let drawing = false;
let timeLeft = 15;
let timerInterval;
let canDraw = true;

// Audio (beep)
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

function beep() {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value = 800;
  osc.type = "sine";
  gain.gain.value = 0.2;
  osc.start();
  osc.stop(audioCtx.currentTime + 0.15);
}

ctx.strokeStyle = "#000";
ctx.lineWidth = 4;
ctx.lineCap = "round";

const prompts = [
  "Turn this into an animal",
  "Make this something funny",
  "What does this become?",
  "Complete it your way",
  "Turn this into a dream"
];

function randomPrompt() {
  document.getElementById("prompt").innerText =
    prompts[Math.floor(Math.random() * prompts.length)];
}

function drawHalfDoodle() {
  ctx.beginPath();
  ctx.moveTo(80, 220);
  ctx.quadraticCurveTo(160, 120, 240, 220);
  ctx.stroke();
}

function startTimer() {
  clearInterval(timerInterval);
  timeLeft = 15;
  canDraw = true;
  document.getElementById("timer").innerText = "15s";

  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = timeLeft + "s";

    if (timeLeft <= 3 && timeLeft > 0) beep();

    if (timeLeft === 0) {
      beep();
      clearInterval(timerInterval);
      canDraw = false;
    }
  }, 1000);
}

function startDrawing(e) {
  if (!canDraw) return;
  drawing = true;
  draw(e);
}

function stopDrawing() {
  drawing = false;
  ctx.beginPath();
}

function draw(e) {
  if (!drawing || !canDraw) return;
  const rect = canvas.getBoundingClientRect();
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x, y);
}

function setColor(c) {
  ctx.strokeStyle = c;
}

function setBrush(size, cap) {
  ctx.lineWidth = size;
  ctx.lineCap = cap;
}

function nextKid() {
  clearInterval(timerInterval);
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  randomPrompt();
  drawHalfDoodle();
  startTimer();
}

canvas.addEventListener("mousedown", startDrawing);
canvas.addEventListener("mouseup", stopDrawing);
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("touchstart", startDrawing);
canvas.addEventListener("touchend", stopDrawing);
canvas.addEventListener("touchmove", draw);

// INIT
randomPrompt();
drawHalfDoodle();
startTimer();
</script>

</body>
</html>
