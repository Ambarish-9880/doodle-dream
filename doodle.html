<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Doodle Dream â€“ 20s Challenge</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  body {
    margin: 0;
    min-height: 100vh;
    font-family: "Poppins", system-ui, sans-serif;
    background: linear-gradient(135deg, #fceabb, #f8b500);
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  header {
    width: 100%;
    padding: 14px;
    text-align: center;
    font-size: 20px;
    font-weight: 600;
    color: #fff;
    background: linear-gradient(90deg, #ff512f, #dd2476);
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  }

  .top-bar {
    width: 340px;
    display: flex;
    justify-content: space-between;
    margin: 14px 0 6px;
    font-size: 14px;
    color: #333;
  }

  #timer {
    font-weight: 700;
    font-size: 18px;
    color: #c62828;
  }

  canvas {
    background: #fff;
    border-radius: 18px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.25);
    touch-action: none;
  }

  .controls {
    margin-top: 12px;
    width: 340px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
  }

  .color {
    width: 30px;
    height: 30px;
    border-radius: 50%;
    border: 2px solid #fff;
    box-shadow: 0 2px 5px rgba(0,0,0,0.25);
  }

  button {
    padding: 8px 14px;
    border-radius: 18px;
    border: none;
    font-size: 13px;
    font-weight: 500;
    background: linear-gradient(90deg, #36d1dc, #5b86e5);
    color: #fff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
  }

  button:active {
    transform: scale(0.95);
  }

  footer {
    margin: 14px;
    font-size: 12px;
    color: #444;
    text-align: center;
  }
</style>
</head>

<body>

<header>Doodle Dream â€“ 20 Second Challenge ðŸŽ¨</header>

<div class="top-bar">
  <div id="prompt">Finish the doodle your way!</div>
  <div id="timer">20s</div>
</div>

<canvas id="canvas" width="340" height="420"></canvas>

<div class="controls">
  <!-- Colors -->
  <div class="color" style="background:#000" onclick="setColor('#000')"></div>
  <div class="color" style="background:#e53935" onclick="setColor('#e53935')"></div>
  <div class="color" style="background:#fb8c00" onclick="setColor('#fb8c00')"></div>
  <div class="color" style="background:#fdd835" onclick="setColor('#fdd835')"></div>
  <div class="color" style="background:#43a047" onclick="setColor('#43a047')"></div>
  <div class="color" style="background:#1e88e5" onclick="setColor('#1e88e5')"></div>
  <div class="color" style="background:#3949ab" onclick="setColor('#3949ab')"></div>
  <div class="color" style="background:#8e24aa" onclick="setColor('#8e24aa')"></div>
  <div class="color" style="background:#ec407a" onclick="setColor('#ec407a')"></div>
  <div class="color" style="background:#6d4c41" onclick="setColor('#6d4c41')"></div>

  <!-- Brushes -->
  <button onclick="setBrush(4)">Normal</button>
  <button onclick="setBrush(8)">Thick</button>
  <button onclick="nextKid()">Next Kid</button>
</div>

<footer>No scores â€¢ No pressure â€¢ Just creativity</footer>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let drawing = false;
let timeLeft = 20;
let timerInterval;
let canDraw = true;

ctx.strokeStyle = "#000";
ctx.lineWidth = 4;
ctx.lineCap = "round";

// Beep sound
const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
function beep() {
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.frequency.value = 900;
  gain.gain.value = 0.2;
  osc.start();
  osc.stop(audioCtx.currentTime + 0.12);
}

const prompts = [
  "Turn this into an animal",
  "Make it funny",
  "What does this become?",
  "Complete the dream",
  "Surprise us!"
];

function randomPrompt() {
  document.getElementById("prompt").innerText =
    prompts[Math.floor(Math.random() * prompts.length)];
}

function drawHalfDoodle() {
  ctx.beginPath();
  ctx.moveTo(90, 230);
  ctx.quadraticCurveTo(170, 120, 250, 230);
  ctx.stroke();
}

function startTimer() {
  clearInterval(timerInterval);
  timeLeft = 20;
  canDraw = true;
  document.getElementById("timer").innerText = "20s";

  timerInterval = setInterval(() => {
    timeLeft--;
    document.getElementById("timer").innerText = timeLeft + "s";
    if (timeLeft <= 3 && timeLeft > 0) beep();
    if (timeLeft === 0) {
      beep();
      clearInterval(timerInterval);
      canDraw = false;
    }
  }, 1000);
}

function startDrawing(e) {
  if (!canDraw) return;
  drawing = true;
  draw(e);
}

function stopDrawing() {
  drawing = false;
  ctx.beginPath();
}

function draw(e) {
  if (!drawing || !canDraw) return;
  const rect = canvas.getBoundingClientRect();
  const x = (e.touches ? e.touches[0].clientX : e.clientX) - rect.left;
  const y = (e.touches ? e.touches[0].clientY : e.clientY) - rect.top;
  ctx.lineTo(x, y);
  ctx.stroke();
  ctx.beginPath();
  ctx.moveTo(x, y);
}

function setColor(c) {
  ctx.strokeStyle = c;
}

function setBrush(size) {
  ctx.lineWidth = size;
}

function nextKid() {
  clearInterval(timerInterval);
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  randomPrompt();
  drawHalfDoodle();
  startTimer();
}

canvas.addEventListener("mousedown", startDrawing);
canvas.addEventListener("mouseup", stopDrawing);
canvas.addEventListener("mousemove", draw);
canvas.addEventListener("touchstart", startDrawing);
canvas.addEventListener("touchend", stopDrawing);
canvas.addEventListener("touchmove", draw);

// INIT
randomPrompt();
drawHalfDoodle();
startTimer();
</script>

</body>
</html>
